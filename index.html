<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>guns.lol-style Bio Link ‚Äî Edit / Export</title>
<style>
  :root{
    --bg:#071017;
    --panel:#0d1116;
    --muted:#9db0c2;
    --accent:#ffd166;
    --accent2:#6be3ff;
    --glass: rgba(255,255,255,0.03);
    --radius:14px;
    --glass-2: rgba(255,255,255,0.02);
    --white:#eaf6ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:
    radial-gradient(800px 300px at 10% 10%, rgba(107,227,255,0.03), transparent 6%),
    radial-gradient(800px 400px at 90% 90%, rgba(255,209,102,0.02), transparent 6%),
    var(--bg);
    color:var(--white);
    -webkit-font-smoothing:antialiased;
  }

  .wrap{padding:28px; display:flex; gap:28px; align-items:flex-start; justify-content:center; min-height:100%;}
  .editor, .preview{width:420px; max-width:92vw; border-radius:var(--radius); background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01)); padding:18px; box-shadow: 0 12px 40px rgba(2,6,15,0.6); border:1px solid rgba(255,255,255,0.03);}

  /* Editor */
  .editor h3{margin:6px 0 12px 0; font-size:16px;}
  label{display:block;font-size:13px;color:var(--muted); margin-bottom:6px}
  input[type="text"], input[type="url"], textarea, select{
    width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.03);
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02)); color:var(--white);
    outline:none; font-size:14px;
  }
  textarea{min-height:68px; resize:vertical}
  .row{display:flex; gap:8px}
  .btn{padding:8px 10px; border-radius:10px; background:var(--glass); color:var(--white); border:1px solid rgba(255,255,255,0.02); cursor:pointer}
  .btn.primary{background: linear-gradient(90deg,var(--accent), #ff9e3b); color:#0b0b0b; font-weight:700; box-shadow: 0 6px 18px rgba(255,160,50,0.06)}
  .muted{color:var(--muted); font-size:13px}

  .links-list{margin-top:12px; display:flex; flex-direction:column; gap:8px}
  .link-item{
    display:flex; gap:8px; padding:8px; border-radius:10px; background:var(--glass);
    align-items:center; justify-content:space-between; border:1px solid rgba(255,255,255,0.02)
  }
  .link-left{display:flex; gap:8px; align-items:center}
  .thumb{width:44px; height:44px; border-radius:8px; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#071017}
  .link-meta{min-width:0}
  .link-meta .title{font-weight:700; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .link-meta .url{font-size:13px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

  .link-actions{display:flex; gap:6px; align-items:center}

  /* Preview (public page) */
  .preview-inner{padding:22px; background:
    linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    border-radius:12px; text-align:center; position:relative; overflow:hidden;}
  .silhouette{
    position:absolute; right:-40px; top:-20px; opacity:0.06; width:420px; pointer-events:none;
    filter: drop-shadow(0 6px 18px rgba(0,0,0,0.6));
  }
  .avatar{width:110px; height:110px; border-radius:999px; margin:6px auto; border:4px solid rgba(255,255,255,0.04); overflow:hidden; display:inline-flex; align-items:center; justify-content:center; background:linear-gradient(180deg,#12202a,#0b1419)}
  .avatar img{width:100%; height:100%; object-fit:cover}
  .name{font-size:20px; font-weight:800; margin-top:8px}
  .bio{color:var(--muted); margin:10px 22px; font-size:14px}

  .public-links{display:flex; flex-direction:column; gap:10px; padding:8px 22px 22px 22px}
  .public-link{
    padding:12px 14px; border-radius:12px; display:flex; gap:12px; align-items:center; justify-content:center; text-decoration:none; color:var(--white);
    font-weight:700; border:1px solid rgba(255,255,255,0.03); transition:transform .08s;
  }
  .public-link:active{transform:translateY(1px)}
  .public-link .ico{width:34px; height:34px; border-radius:10px; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#071017}

  .footer{display:flex; gap:8px; align-items:center; justify-content:space-between; margin-top:12px; color:var(--muted); font-size:13px}
  .tools{display:flex; gap:8px; align-items:center}

  /* small */
  .small{font-size:13px}
  .hint{color:var(--muted); font-size:12px}

  @media(max-width:920px){
    .wrap{flex-direction:column; align-items:center; padding:18px}
  }
</style>
</head>
<body>
<div class="wrap" role="application" aria-label="guns.lol style bio editor and preview">
  <!-- EDITOR -->
  <section class="editor" aria-label="Editor">
    <h3>Edit your guns.lol-style Bio</h3>

    <label>Display name</label>
    <input id="nameInput" type="text" placeholder="Your name or handle" value="Player123" />

    <label>Short bio</label>
    <textarea id="bioInput" placeholder="One-liner or status">Fragging stuff & chill ‚Äî links below.</textarea>

    <div style="display:flex; gap:8px; margin-top:10px;">
      <div style="flex:0 0 120px;">
        <label>Avatar URL</label>
        <input id="avatarInput" type="url" placeholder="https://..." value="" />
      </div>
      <div style="flex:1;">
        <label>Accent color</label>
        <input id="colorInput" type="text" placeholder="#ffd166 or name" value="#ffd166" />
      </div>
    </div>

    <div style="display:flex; gap:8px; margin-top:12px; align-items:center;">
      <button id="addLinkBtn" class="btn primary">+ Add Link</button>
      <div style="flex:1"></div>
      <button id="exportBtn" class="btn">Export HTML</button>
      <button id="copyCfgBtn" class="btn">Copy JSON</button>
    </div>

    <div class="links-list" id="linksList" aria-live="polite" style="margin-top:12px">
      <!-- link items inserted here -->
    </div>

    <div style="margin-top:12px; display:flex; gap:8px; align-items:center;">
      <button id="resetBtn" class="btn">Reset</button>
      <button id="importBtn" class="btn">Import JSON</button>
      <div style="flex:1"></div>
      <div class="hint">Saved to browser localStorage</div>
    </div>

    <div style="margin-top:12px; font-size:13px; color:var(--muted)">
      Tip: Click a link in the preview to open. Use <strong>Export HTML</strong> to get a single file you can host or share.
    </div>
  </section>

  <!-- PREVIEW -->
  <aside class="preview" aria-label="Preview / Public page">
    <div class="preview-inner" id="preview">
      <!-- silhouette -->
      <svg class="silhouette" viewBox="0 0 900 300" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <g fill="#ffffff"><path d="M120 160c30-18 260-110 440-60 140 38 250 120 230 140-28 28-460 28-680-80z" opacity="0.06"/></g>
      </svg>

      <div class="avatar" id="avatarWrap" title="Avatar">
        <img id="avatarImg" src="" alt="avatar" />
      </div>
      <div class="name" id="previewName">Player123</div>
      <div class="bio" id="previewBio">Fragging stuff & chill ‚Äî links below.</div>

      <div class="public-links" id="publicLinks" aria-live="polite">
        <!-- links generated here -->
      </div>

      <div class="footer">
        <div class="muted small">guns.lol style ‚Ä¢ local preview</div>
        <div class="tools">
          <button id="copyPageBtn" class="btn">Copy Page HTML</button>
          <button id="downloadBtn" class="btn">Download HTML</button>
        </div>
      </div>
    </div>
  </aside>
</div>

<script>
/* Link-in-bio editor / preview
   - Save to localStorage
   - Add/Edit/Delete/Reorder links
   - Export concrete single-file HTML (download)
*/

const STORAGE_KEY = 'gunslol_bio_v1';

// default content
const defaultState = {
  name: 'Player123',
  bio: 'Fragging stuff & chill ‚Äî links below.',
  avatar: '',
  accent: '#ffd166',
  links: [
    {title:'Discord', url:'https://discord.com', color:'#6be3ff', icon:'üí¨'},
    {title:'YouTube', url:'https://youtube.com', color:'#ff6b6b', icon:'‚ñ∂Ô∏è'},
    {title:'Skins', url:'https://example.com', color:'#ffd166', icon:'üß∞'},
  ]
};

let state = loadState();

// DOM
const nameInput = document.getElementById('nameInput');
const bioInput = document.getElementById('bioInput');
const avatarInput = document.getElementById('avatarInput');
const colorInput = document.getElementById('colorInput');
const linksList = document.getElementById('linksList');
const previewName = document.getElementById('previewName');
const previewBio = document.getElementById('previewBio');
const previewAvatar = document.getElementById('avatarImg');
const previewDiv = document.getElementById('preview');
const publicLinks = document.getElementById('publicLinks');

const addLinkBtn = document.getElementById('addLinkBtn');
const exportBtn = document.getElementById('exportBtn');
const copyCfgBtn = document.getElementById('copyCfgBtn');
const resetBtn = document.getElementById('resetBtn');
const importBtn = document.getElementById('importBtn');
const copyPageBtn = document.getElementById('copyPageBtn');
const downloadBtn = document.getElementById('downloadBtn');

function loadState(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(raw) return JSON.parse(raw);
  }catch(e){}
  localStorage.setItem(STORAGE_KEY, JSON.stringify(defaultState));
  return JSON.parse(JSON.stringify(defaultState));
}

function saveState(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  renderAll();
}

function renderAll(){
  // editor inputs
  nameInput.value = state.name || '';
  bioInput.value = state.bio || '';
  avatarInput.value = state.avatar || '';
  colorInput.value = state.accent || '#ffd166';

  // preview
  previewName.textContent = state.name || '';
  previewBio.textContent = state.bio || '';
  previewAvatar.src = state.avatar || blankAvatarData();
  previewAvatar.alt = (state.name || 'avatar');

  // links list in editor
  linksList.innerHTML = '';
  state.links.forEach((ln, idx) => {
    const item = document.createElement('div');
    item.className = 'link-item';
    item.innerHTML = `
      <div class="link-left">
        <div class="thumb" style="background:${ln.color}">${ln.icon||getInitials(ln.title)}</div>
        <div class="link-meta">
          <div class="title">${escapeHtml(ln.title)}</div>
          <div class="url">${escapeHtml(ln.url)}</div>
        </div>
      </div>
      <div class="link-actions">
        <button class="btn small edit" data-i="${idx}">Edit</button>
        <button class="btn small up" data-i="${idx}">‚Üë</button>
        <button class="btn small down" data-i="${idx}">‚Üì</button>
        <button class="btn small del" data-i="${idx}">Del</button>
      </div>
    `;
    linksList.appendChild(item);
  });

  // public links
  publicLinks.innerHTML = '';
  state.links.forEach((ln, idx) => {
    const a = document.createElement('a');
    a.className = 'public-link';
    a.href = ln.url;
    a.target = '_blank';
    a.rel = 'noopener noreferrer';
    a.style.background = `linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02))`;
    a.innerHTML = `<span class="ico" style="background:${ln.color}">${ln.icon||getInitials(ln.title)}</span><span>${escapeHtml(ln.title)}</span>`;
    publicLinks.appendChild(a);
  });

  // adjust accent color usage (for buttons)
  document.querySelectorAll('.primary').forEach(el=>{
    el.style.background = `linear-gradient(90deg, ${state.accent}, ${shade(state.accent, -18)})`;
  });
}

// helpers
function blankAvatarData(){
  // small inline svg placeholder as data URL
  const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='512' height='512'><rect fill='#0b1419' width='100%' height='100%'/><g fill='#27414c'><circle cx='256' cy='196' r='96'/><rect x='120' y='320' width='272' height='96' rx='40'/></g></svg>`;
  return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
}
function getInitials(t){
  if(!t) return '‚Ä¢';
  const parts = t.trim().split(/\s+/);
  if(parts.length===1) return parts[0].slice(0,2).toUpperCase();
  return (parts[0][0]+parts[1][0]).toUpperCase();
}
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c])); }
function shade(hex, percent){
  // simple hex shade
  try{
    const c = hex.replace('#','');
    const num = parseInt(c,16);
    let r = (num >> 16) + percent, g = (num >> 8 & 0x00FF) + percent, b = (num & 0x0000FF) + percent;
    r = Math.max(Math.min(255,r),0); g = Math.max(Math.min(255,g),0); b = Math.max(Math.min(255,b),0);
    return '#' + ( (1<<24) + (r<<16) + (g<<8) + b ).toString(16).slice(1);
  }catch(e){ return hex; }
}

// UI wiring
nameInput.addEventListener('input', (e)=>{ state.name = e.target.value; saveState(); });
bioInput.addEventListener('input', (e)=>{ state.bio = e.target.value; saveState(); });
avatarInput.addEventListener('input', (e)=>{ state.avatar = e.target.value; saveState(); });
colorInput.addEventListener('input', (e)=>{ state.accent = e.target.value || '#ffd166'; saveState(); });

addLinkBtn.addEventListener('click', ()=> openLinkEditor());
linksList.addEventListener('click', (e)=>{
  const t = e.target;
  if(t.matches('.edit')){
    const i = Number(t.dataset.i); openLinkEditor(state.links[i], i);
  } else if(t.matches('.del')){
    const i = Number(t.dataset.i); if(confirm('Delete this link?')) { state.links.splice(i,1); saveState(); }
  } else if(t.matches('.up')){
    const i = Number(t.dataset.i); if(i>0){ const a = state.links.splice(i,1)[0]; state.links.splice(i-1,0,a); saveState(); }
  } else if(t.matches('.down')){
    const i = Number(t.dataset.i); if(i<state.links.length-1){ const a = state.links.splice(i,1)[0]; state.links.splice(i+1,0,a); saveState(); }
  }
});

exportBtn.addEventListener('click', ()=> {
  const html = buildStandaloneHtml(state);
  // open in new window / tab with data URL
  const blob = new Blob([html], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  window.open(url, '_blank');
});

copyCfgBtn.addEventListener('click', ()=> {
  navigator.clipboard.writeText(JSON.stringify(state, null, 2)).then(()=>{
    alert('JSON copied to clipboard ‚Äî you can paste it to import later.');
  }).catch(()=>alert('Unable to copy to clipboard.'));
});

resetBtn.addEventListener('click', ()=> {
  if(confirm('Reset to defaults and clear saved data?')) {
    state = JSON.parse(JSON.stringify(defaultState)); saveState();
  }
});

importBtn.addEventListener('click', ()=> {
  const raw = prompt('Paste JSON configuration here (overwrite current):');
  if(!raw) return;
  try{
    const obj = JSON.parse(raw);
    if(!Array.isArray(obj.links)) throw new Error('invalid format');
    state = obj;
    saveState();
    alert('Imported.');
  }catch(e){
    alert('Import failed: ' + (e.message||e));
  }
});

// copy page HTML to clipboard
copyPageBtn.addEventListener('click', async ()=> {
  const html = buildStandaloneHtml(state);
  try{
    await navigator.clipboard.writeText(html);
    alert('Standalone HTML copied to clipboard');
  }catch(e){
    alert('Copy failed. You can instead click Download HTML.');
  }
});

// download file
downloadBtn.addEventListener('click', ()=> {
  const html = buildStandaloneHtml(state);
  const blob = new Blob([html], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = (state.name || 'bio') + '.html';
  document.body.appendChild(a); a.click(); a.remove();
  setTimeout(()=>URL.revokeObjectURL(url), 2000);
});

// link editor modal (simple prompt-based)
function openLinkEditor(link = null, index = null){
  // gather values via prompt sequence (keeps UI simple)
  const title = prompt('Link title', link ? link.title : '');
  if(title === null) return;
  const url = prompt('Link URL (include https://)', link ? link.url : 'https://');
  if(url === null) return;
  const icon = prompt('Emoji/icon text (e.g. üîó ‚ñ∂Ô∏è üì®) or leave blank', link ? (link.icon||'') : '');
  if(icon === null) return;
  const color = prompt('Background color for icon (hex)', link ? (link.color||'#6be3ff') : '#6be3ff');
  if(color === null) return;

  const item = {title: title.trim()||'Link', url: url.trim()||'#', icon: icon.trim()||'', color: color.trim()||'#6be3ff'};
  if(index === null) state.links.push(item); else state.links[index] = item;
  saveState();
}

// Build standalone HTML for export
function buildStandaloneHtml(cfg){
  // return a complete single-file HTML string (simple styling + links)
  const escaped = JSON.stringify(cfg);
  // small, clean public template
  return `<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>${escapeHtml(cfg.name||'Profile')}</title>
<style>
  body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:linear-gradient(180deg,#071017,#051016);color:#eaf6ff;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}
  .card{width:100%;max-width:540px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:28px;border-radius:16px;box-shadow:0 12px 40px rgba(2,6,15,0.6);border:1px solid rgba(255,255,255,0.03);text-align:center;}
  .avatar{width:120px;height:120px;border-radius:999px;margin:0 auto 10px;background:#0b1419;overflow:hidden;border:4px solid rgba(255,255,255,0.04)}
  .avatar img{width:100%;height:100%;object-fit:cover}
  .name{font-size:22px;font-weight:800;margin-top:6px}
  .bio{color:#9db0c2;margin:10px 22px;font-size:14px}
  .links{margin-top:16px;display:flex;flex-direction:column;gap:12px;padding:0 16px}
  .link{display:flex;gap:12px;align-items:center;justify-content:center;padding:12px;border-radius:12px;text-decoration:none;color:#071017;font-weight:700;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)}
  .ico{width:40px;height:40px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;font-weight:800}
  .muted{color:#9db0c2;margin-top:14px;font-size:13px}
  @media(max-width:520px){ .card{padding:18px} .avatar{width:96px;height:96px} }
</style></head><body>
<div class="card">
  <div class="avatar"><img src="${escapeHtml(cfg.avatar||'') || ''}" alt="avatar" onerror="this.src='data:image/svg+xml;utf8,${encodeURIComponent('<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;512&quot; height=&quot;512&quot;><rect fill=&quot;#0b1419&quot; width=&quot;100%25&quot; height=&quot;100%25&quot;/><g fill=&quot;#27414c&quot;><circle cx=&quot;256&quot; cy=&quot;196&quot; r=&quot;96&quot;/><rect x=&quot;120&quot; y=&quot;320&quot; width=&quot;272&quot; height=&quot;96&quot; rx=&quot;40&quot;/></g></svg>')}"/></div>
  <div class="name">${escapeHtml(cfg.name||'')}</div>
  <div class="bio">${escapeHtml(cfg.bio||'')}</div>
  <div class="links">
    ${ (cfg.links||[]).map(ln => {
      return `<a class="link" href="${escapeHtml(ln.url||'#')}" target="_blank" rel="noopener noreferrer"><span class="ico" style="background:${escapeHtml(ln.color||'#6be3ff')}">${escapeHtml(ln.icon||ln.title.charAt(0))}</span><span>${escapeHtml(ln.title||'Link')}</span></a>`;
    }).join('') }
  </div>
  <div class="muted">Shared via guns.lol-style bio ‚Ä¢ exported</div>
</div>
</body></html>`;
}

// util: quick html escape (for template building) - local copy
function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c => ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c])); }

function getStateSnapshot(){ return JSON.parse(JSON.stringify(state)); }

// initial render
renderAll();
</script>
</body>
</html>
