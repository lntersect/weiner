<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>333 — cinematic</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:255,255,255;
    --bg-bright:0.30;
  }
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif}
  html,body{height:100%;background:#000;color:#fff;overflow:hidden}
  body{display:flex;align-items:center;justify-content:center;cursor:none}

  /* background */
  .bg { position:fixed; inset:0; width:100%; height:100%; object-fit:cover; z-index:0;
    filter: brightness(var(--bg-bright)) contrast(1.2); transition: transform .18s ease-out; }
  .overlay { position:fixed; inset:0; background:rgba(0,0,0,0.45); backdrop-filter: blur(2px); z-index:1; }

  /* canvas layers */
  canvas { position:fixed; inset:0; z-index:1; pointer-events:none; }

  /* enter screen */
  #enterScreen { position:fixed; inset:0; z-index:999; display:flex; align-items:center; justify-content:center;
    flex-direction:column; background:linear-gradient(180deg, rgba(0,0,0,0.82), rgba(0,0,0,0.88)); }
  #enterText { font-size:2rem; letter-spacing:5px; text-transform:lowercase; color:transparent;
    -webkit-text-stroke:0.8px rgba(255,255,255,0.9); text-align:center; cursor:pointer; user-select:none;
    transition: transform .25s ease, opacity .5s ease; }
  #enterText .inner { background:linear-gradient(90deg,#fff,#cfcfcf); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
    animation:enterPulse 2s infinite; }
  @keyframes enterPulse { 0%{opacity:.82}50%{opacity:1;transform:translateY(-2px)}100%{opacity:.82} }

  /* card */
  .card { position:relative; z-index:3; width:540px; max-width:92vw; background:rgba(12,12,12,0.86);
    border-radius:18px; padding:36px; text-align:center; box-shadow: 0 18px 60px rgba(0,0,0,0.75);
    border:1px solid rgba(255,255,255,0.04); backdrop-filter: blur(8px); transform: translateY(28px); opacity:0;
    transition: opacity .9s ease, transform .9s cubic-bezier(.2,.9,.2,1); overflow:hidden; }
  .card.show { transform:none; opacity:1; }

  .pfp { width:110px; height:110px; border-radius:50%; overflow:hidden; margin:0 auto 14px; position:relative; }
  .pfp img { width:100%; height:100%; object-fit:cover; display:block; }
  .pfp::before { content:""; position:absolute; inset:-6px; border-radius:50%; background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.12) 30%, transparent 55%); filter:blur(6px); animation:pg 2.6s infinite; z-index:0 }
  @keyframes pg { 0%{transform:scale(1);opacity:.45}50%{transform:scale(1.06);opacity:1}100%{transform:scale(1);opacity:.45} }

  h1 { font-size:2rem; font-weight:600; letter-spacing:1px;
    background:linear-gradient(90deg,#fff 0%, #bfbfbf 45%, #fff 100%); background-size:200% auto;
    -webkit-background-clip:text; -webkit-text-fill-color:transparent; animation:shimmer 3s linear infinite; margin-bottom:6px; }
  @keyframes shimmer { from{background-position:0% 50%} to{background-position:200% 50%} }

  .divider { height:1px; width:80%; margin:12px auto; background:rgba(255,255,255,0.06); }

  .icon-row { display:flex; gap:18px; justify-content:center; margin-top:14px; }
  .icon { width:48px; height:48px; border-radius:12px; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.04); cursor:pointer; transition: transform .22s, box-shadow .22s; position:relative; overflow:visible; }
  .icon img { width:26px; height:26px; display:block; }
  .icon:hover { transform:translateY(-6px) scale(1.06); box-shadow: 0 8px 30px rgba(255,255,255,0.06); }

  /* glass shine */
  .glass { position:absolute; top:-40%; left:-20%; width:140%; height:220%; pointer-events:none; z-index:2; transform:translateX(-30%) rotate(18deg); background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.08) 45%, rgba(255,255,255,0.02)); mix-blend-mode:screen; opacity:0; border-radius:28px; transition:opacity .18s linear, transform .12s linear; }

  /* video */
  .video-container { margin-top:20px; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.06); box-shadow:0 6px 22px rgba(0,0,0,0.55); transition: all .9s ease; }
  iframe { width:100%; height:280px; border:0; display:block; }

  /* visualizer (bottom) */
  .viz-wrap { margin-top:14px; width:100%; height:56px; display:block; }
  #vizCanvas { width:100%; height:100%; display:block; }

  /* cursor trail particles */
  .trail-dot { position:fixed; width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,0.9); pointer-events:none; filter:blur(.8px); transform:translate(-50%,-50%); z-index:9999; }

  @media (max-width:520px) {
    .card { width:92%; padding:28px; }
    iframe { height:200px; }
    #enterText { font-size:1.5rem; letter-spacing:3px; }
  }
</style>
</head>
<body>
  <!-- ENTER -->
  <div id="enterScreen" aria-label="Enter screen">
    <div id="enterText" role="button" tabindex="0"><span class="inner">enter the void</span></div>
  </div>

  <!-- BG + canvases -->
  <img class="bg" src="https://media.tenor.com/Ua5qB1eng_oAAAAC/black-and-white-night-city.gif" alt="bg">
  <div class="overlay"></div>
  <canvas id="fogCanvas"></canvas>
  <canvas id="trailCanvas"></canvas>
  <canvas id="sparkCanvas"></canvas>

  <!-- MAIN CARD -->
  <div class="card" id="mainCard" role="main" aria-label="Main content">
    <div class="glass" id="glass"></div>

    <div class="pfp"><img src="https://i.imgur.com/OJeD12w.jpeg" alt="pfp"></div>
    <h1>333</h1>
    <div class="divider"></div>

    <div class="icon-row">
      <a class="icon" href="https://discord.com" target="_blank" rel="noreferrer"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111370.png" alt="discord"></a>
      <a class="icon" href="https://t.me" target="_blank" rel="noreferrer"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="telegram"></a>
    </div>

    <div class="video-container" id="videoWrap" aria-hidden="false">
      <!-- start muted so autoplay works; we'll unmute on click -->
      <iframe id="ytFrame" src="https://www.youtube.com/embed/OAyixxm4yXw?autoplay=1&mute=1&controls=0&loop=1&playlist=OAyixxm4yXw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>

    <div class="viz-wrap">
      <canvas id="vizCanvas"></canvas>
    </div>
  </div>

<script>
/* ====== Setup & sizing ====== */
const enterScreen = document.getElementById('enterScreen');
const enterText = document.getElementById('enterText');
const mainCard = document.getElementById('mainCard');
const glass = document.getElementById('glass');
const bg = document.querySelector('.bg');

// canvases
const fogC = document.getElementById('fogCanvas'), fogCtx = fogC.getContext('2d');
const trailC = document.getElementById('trailCanvas'), trailCtx = trailC.getContext('2d');
const sparkC = document.getElementById('sparkCanvas'), sparkCtx = sparkC.getContext('2d');
const viz = document.getElementById('vizCanvas'), vctx = viz.getContext('2d');

let w=innerWidth, h=innerHeight, dpr=Math.min(devicePixelRatio||1,2);
function resize(){
  w = innerWidth; h = innerHeight;
  [fogC, trailC, sparkC].forEach(c=>{
    c.width = w * dpr; c.height = h * dpr;
    c.style.width = w + 'px'; c.style.height = h + 'px';
    const ctx = c.getContext('2d'); ctx.setTransform(dpr,0,0,dpr,0,0);
  });
  viz.width = Math.floor(document.getElementById('vizCanvas').clientWidth * dpr);
  viz.height = Math.floor(document.getElementById('vizCanvas').clientHeight * dpr);
  vctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener('resize', resize);
resize();

/* ====== Fog blobs ====== */
const fogBlobs = [];
for(let i=0;i<6;i++){
  fogBlobs.push({
    x: Math.random()*w, y: Math.random()*h,
    s: (w/2)*(0.18 + Math.random()*0.6),
    vx: (Math.random()-0.5)*0.04, vy: (Math.random()-0.5)*0.03,
    alpha: 0.04 + Math.random()*0.08,
    phase: Math.random()*Math.PI*2
  });
}
function drawFog(t){
  fogCtx.clearRect(0,0,w,h);
  fogBlobs.forEach(b=>{
    b.x += b.vx * Math.cos(t*0.0006 + b.phase);
    b.y += b.vy * Math.sin(t*0.0004 + b.phase);
    const g = fogCtx.createRadialGradient(b.x,b.y,0,b.x,b.y,b.s);
    g.addColorStop(0, `rgba(255,255,255,${b.alpha})`);
    g.addColorStop(0.35, `rgba(255,255,255,${b.alpha*0.45})`);
    g.addColorStop(1, 'rgba(255,255,255,0)');
    fogCtx.fillStyle = g;
    fogCtx.beginPath();
    fogCtx.arc(b.x,b.y,b.s,0,Math.PI*2);
    fogCtx.fill();
  });
}

/* ====== Particle trail (cursor) ====== */
const trailParticles = [];
function spawnTrail(x,y){
  trailParticles.push({x,y,r:4,life:28, vx:(Math.random()-0.5)*0.6, vy:(Math.random()-0.5)*0.6});
  if(trailParticles.length>120) trailParticles.splice(0, trailParticles.length-100);
}
function drawTrail(){
  trailCtx.clearRect(0,0,w,h);
  for(let i=trailParticles.length-1;i>=0;i--){
    const p = trailParticles[i];
    trailCtx.beginPath();
    trailCtx.fillStyle = `rgba(255,255,255,${p.life/36})`;
    trailCtx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    trailCtx.fill();
    p.x += p.vx; p.y += p.vy; p.r *= 0.985; p.life -= 1.2;
    if(p.life <= 0) trailParticles.splice(i,1);
  }
}

/* ====== Sparks on icon hover ====== */
const sparks = [];
function spawnSparks(x,y,amount=14){
  for(let i=0;i<amount;i++) sparks.push({
    x: x + (Math.random()-0.5)*12,
    y: y + (Math.random()-0.5)*12,
    vx: (Math.random()-0.5)*3, vy: (Math.random()-1.8)*3.4,
    r: 0.6+Math.random()*1.6, life: 22+Math.random()*24
  });
}
function drawSparks(){
  sparkCtx.clearRect(0,0,w,h);
  for(let i=sparks.length-1;i>=0;i--){
    const s = sparks[i];
    sparkCtx.beginPath();
    sparkCtx.fillStyle = `rgba(255,255,255,${Math.max(s.life/28,0)})`;
    sparkCtx.arc(s.x,s.y,s.r,0,Math.PI*2); sparkCtx.fill();
    s.x += s.vx; s.y += s.vy; s.vy += 0.06; s.vx *= 0.995; s.life -= 1.6; s.r *= 0.993;
    if(s.life <= 0) sparks.splice(i,1);
  }
}

/* ====== Visualizer: fake-but-convincing model ======
   We create an energy model driven by:
   - a low-frequency beat oscillator (simulates kick)
   - a medium-frequency rhythm oscillator
   - randomized transient peaks tied to "visual energy"
   We'll also slightly modulate by the video's playback rate (can't access audio directly).
*/
const vizBars = 48;
const barVals = new Array(vizBars).fill(0);
let vizStart = 0;
function fakeAudioEnergy(t){
  // base beat (0.9 - 1.2 Hz range)
  const beat = 0.85 + 0.35 * Math.abs(Math.sin(t * 0.004 + 0.02));
  // tempo flicker
  const rhythm = 0.6 + 0.5 * Math.abs(Math.sin(t * 0.011 + 0.7));
  // noise bursts
  const bursts = (Math.sin(t * 0.02) > 0.8) ? (0.4 + Math.random()*0.8) : (0.04*Math.random());
  const energy = Math.min(1, (0.55*beat + 0.35*rhythm + 0.9*bursts) * (0.9 + 0.2*Math.random()));
  return energy;
}
function drawViz(t){
  if(!vizStart) vizStart = t;
  const elapsed = t - vizStart;
  // compute base energy
  const E = fakeAudioEnergy(elapsed);
  // fill barVals with smoothed random values around E
  for(let i=0;i<vizBars;i++){
    const idxFactor = i / vizBars;
    // more movement near low bars (simulate bass)
    const local = E * (0.6 + 0.6*(1 - idxFactor)) + 0.15*Math.sin(elapsed*0.007*(1+idxFactor*2) + i);
    // occasional transient
    const transient = (Math.random() < 0.02) ? (0.3 + Math.random()*0.9) : 0;
    const target = Math.min(1, Math.max(0, local + transient));
    barVals[i] += (target - barVals[i]) * (0.08 + 0.06*(1-idxFactor)); // smoothing
    // decay tiny
    barVals[i] *= 0.995;
  }

  // draw
  const cw = viz.width / dpr, ch = viz.height / dpr;
  vctx.clearRect(0,0,cw,ch);
  const bw = cw / (vizBars * 1.2);
  for(let i=0;i<vizBars;i++){
    const val = barVals[i];
    const h = Math.max(2, val * ch * (0.92 - i/(vizBars*2)));
    const x = i * (bw*1.15);
    // gradient
    const g = vctx.createLinearGradient(x, ch, x, ch-h);
    g.addColorStop(0, 'rgba(255,255,255,0.06)');
    g.addColorStop(0.6, 'rgba(255,255,255,0.22)');
    g.addColorStop(1, 'rgba(255,255,255,0.6)');
    vctx.fillStyle = g;
    // draw shadow-soft rect for glow
    vctx.fillRect(x, ch-h, bw, h);
    // subtle overlay to create banding
    vctx.globalAlpha = 0.06;
    vctx.fillRect(x, ch-h*0.45, bw, h*0.45);
    vctx.globalAlpha = 1;
  }
}

/* ====== Parallax + glass shine follow ====== */
document.addEventListener('mousemove', (e) => {
  const x = (innerWidth/2 - e.pageX) / 90;
  const y = (innerHeight/2 - e.pageY) / 90;
  bg.style.transform = `translate(${x}px, ${y}px) scale(1.05)`;
  // glass follow
  const rect = mainCard.getBoundingClientRect();
  const rx = (e.clientX - rect.left) / rect.width;
  glass.style.opacity = 1;
  glass.style.transform = `translateX(${(rx-0.5)*60}px) rotate(18deg)`;
});

/* ====== Cursor trail and interaction ====== */
window.addEventListener('pointermove', (e) => {
  spawnTrail(e.clientX, e.clientY);
});
window.addEventListener('pointerdown', () => {
  // small card "press" animation
  mainCard.style.transform = 'translateY(2px)';
  setTimeout(()=> mainCard.style.transform = '', 140);
});

/* ====== Icon hover sparks ====== */
document.querySelectorAll('.icon').forEach(icon=>{
  icon.addEventListener('mouseenter', (ev)=>{
    const r = icon.getBoundingClientRect();
    spawnSparks(r.left + r.width/2, r.top + r.height/2, 18);
  });
  icon.addEventListener('click', (ev)=>{
    const r = icon.getBoundingClientRect();
    spawnSparks(r.left + r.width/2, r.top + r.height/2, 22);
  });
});

/* ====== Main loop ====== */
let last = 0;
function loop(t){
  drawFog(t);
  drawTrail();
  drawSparks();
  drawViz(t);
  last = t;
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

/* ====== Enter click behavior ====== */
const ytFrame = document.getElementById('ytFrame');
enterText.addEventListener('click', () => {
  // fade out enter
  enterScreen.style.opacity = 0;
  enterScreen.style.pointerEvents = 'none';
  setTimeout(()=> enterScreen.style.display = 'none', 900);
  // reveal main card
  mainCard.classList.add('show');
  // unmute YouTube (reload iframe with mute=0) — user click allows unmuted playback
  ytFrame.src = "https://www.youtube.com/embed/OAyixxm4yXw?autoplay=1&mute=0&controls=0&loop=1&playlist=OAyixxm4yXw";
});

/* ====== Resize handler for viz canvas */ 
function resizeViz(){
  const rc = document.getElementById('vizCanvas').getBoundingClientRect();
  viz.width = Math.round(rc.width * dpr);
  viz.height = Math.round(rc.height * dpr);
  vctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener('resize', resizeViz);
resizeViz();

/* keep canvases sized correctly (in case) */
window.addEventListener('resize', resize);

/* ====== Accessibility: keyboard to start ===== */
enterText.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') enterText.click(); });

/* ====== End of script ====== */
</script>
</body>
</html>
